<topnav></topnav>

<section ng-if="allowedAccess">
    <section class="section account-profile">
        <div class="container profile">
            <div class="section box account-profile">
                <div class="columns">

                    <div class="column is-4">
                        <article class="message is-medium">
                            <p>To do: </p>
                            <div style="display: flex;" class="message-body" ng-repeat="todo in todos" ng-if="!todo.done">
                                <p style="width:80%">{{todo.todo}}</p>
                                <div>
                                    <input type="checkbox" value="todo.done" ng-click="deleteTodo(todo)">
                                </div>
                            </div>
                        </article>
                        <form ng-submit="submitTodo(newtodo); newtodo =''; ">
                            <input type="text" ng-model="newtodo" placeholder="Enter todo here">
                            <br><br>
                            <input class="button is-danger working-resize-submit" type="submit" value="Submit">
                        </form>
                    </div>

                    <div class="column is-8">
                        <article class="message is-medium">
                            <p>Summary: </p>
                            <div class="message-body">
                                {{project.description}}
                            </div>
                        </article>
                    </div>
                </div>

                <br>


                <footer>
                    <div class="tabs profile is-medium is-centered is-boxed">
                        <ul>
                            <li class="is-active" id="messages" ng-click="changeTab('messages');">
                                <a>
                                        <span class="icon is-small"><i class="fa fa-envelope-o"></i></span>
                                        <span>Messages</span>
                                    </a>
                            </li>
                            <li class="" id="projects" ng-click="changeTab('projects');">
                                <a>
                                        <span class="icon is-small"><i class="fa fa-folder"></i></span>
                                        <span>Projects</span>
                                    </a>
                            </li>
                            <!-- <li ng-click="changeTab('messages');">
                                    <a>
                                        <span class="icon is-small"><i class="fa fa-heart"></i></span>
                                        <span>Thanks</span>
                                    </a>
                                </li> -->
                            <!-- <li ng-click="changeTab('messages');">
                                    <a>
                                        <span class="icon is-small"><i class="fa fa-sliders"></i></span>
                                        <span>Settings</span>
                                    </a>
                                </li> -->
                        </ul>
                    </div>
                </footer>


                <!-- <div>
                    <article class="message is-medium">
                        <div class="message-header">
                            <p>Links: </p>
                        </div>
                        <div style="display: flex;" class="message-body" ng-repeat="link in links">
                            <a style="text-decoration: none" ng-href="{{link.link}}" target="_blank">
                                <p>{{link.linkname}}</p>
                            </a>
                        </div>
                        <form ng-submit="submitLink(newlinkname, newlink); newlinkname =''; newlink=''; ">
                            <input type="text" ng-model="newlinkname" placeholder="Enter link name here">
                            <input type="text" ng-model="newlink" placeholder="Enter link url here">
                            <input type="submit" value="Submit">
                        </form>
                    </article>
                </div> -->

                <br><br>

                <article class="box media project-box overflow: auto;" ng-repeat="project in userProjects" ng-if="!isActive">
                    <a ng-href="/#!/account/{{project.posterid}}">
                        <div class="media-left">
                            <figure class="image is-64x64">
                                <img ng-if="!ownPage" ng-src="{{pageOwner.profilepic}}" alt="Profile pic for {{pageOwner.username}}">
                                <img ng-if="ownPage" ng-src="{{curUser.profilepic}}" alt="Profile pic for {{curUser.username}}">
                            </figure>
                        </div>
                        <div class="media-content">
                            <div class="content">
                                <p>
                                    <!-- <a class="subtitle is-5" ng-href="/#!/account/{{project.posterid}}">{{project.username}}</a> -->
                                    <a class="subtitle is-5" ng-if="!ownPage" ng-click="changeModal(project);">{{project.title}}</a>
                                    <a class="subtitle is-5" ng-if="ownPage" ui-sref="workingProject({id: {{project.projid}} })">{{project.title}}</a>
                                    <br>
                                    <hr>
                                    <div class="feed-description">{{project.description}}</div>
                                </p>
                            </div>
                        </div>
                    </a>
                </article>



                <div class="box message-board-container" ng-if="isActive">
                    <article class="media " ng-repeat="comment in userComments">
                        <figure class="media-left ">
                            <p class="image is-64x64 ">
                                <a ng-href="/#!/account/{{comment.posterid}}"> <img ng-src="{{comment.profilepic}}"> </a>
                            </p>
                        </figure>
                        <div class="media-content ">
                            <div class="content ">
                                <p>
                                    <a ng-href="/#!/account/{{comment.posterid}}"><strong ng-if="comment.firstname && comment.lastname">{{comment.firstname}} {{comment.lastname}}</strong>
                                        <strong ng-if="!comment.firstname || !comment.lastname">{{comment.username}}</strong></a>
                                    <br> {{comment.message}}
                                    <br>
                                </p>
                            </div>

                            <article class="media " ng-repeat="reply in comment.replies">
                                <figure class="media-left ">
                                    <p class="image is-48x48 ">
                                        <a ng-href="/#!/account/{{reply.posterid}}"><img ng-src="{{reply.profilepic}}"></a>
                                    </p>
                                </figure>
                                <div class="media-content ">
                                    <div class="content ">
                                        <p>
                                            <a ng-href="/#!/account/{{reply.posterid}}"><strong ng-if="reply.firstname && reply.lastname">{{reply.firstname}} {{reply.lastname}}</strong>
                                                <strong ng-if="!reply.firstname || !reply.lastname">{{reply.username}}</strong></a>
                                            <br> {{reply.message}}
                                            <br>
                                        </p>
                                    </div>
                                </div>
                            </article>
                            <article class="media" ng-if="curUser.username">
                                <figure class="media-left">
                                    <p class="image is-64x64">
                                        <img ng-src="{{curUser.profilepic}}">
                                    </p>
                                </figure>
                                <div class="media-content">
                                    <div class="field">

                                        <textarea class="textarea" rows="4" ng-model="newReply" placeholder="Add a reply..."></textarea>

                                    </div>
                                    <div class="field">
                                        <p class="control change-button-style">
                                            <button class="button is-danger" ng-click="submitReply(comment, newReply); newReply=''; ">Post reply</button>
                                        </p>
                                    </div>
                                </div>
                            </article>
                            <hr style="border-top: dotted 1px;" />
                        </div>
                    </article>

                    <article class="media " ng-if="curUser.username">
                        <div class="media-content ">
                            <div class="field ">
                                <p class="control ">
                                    <textarea class="textarea " ng-model="newComment" placeholder="Add a comment... "></textarea>
                                </p>
                            </div>
                            <div class="field ">
                                <p class="control change-button-style">
                                    <button class="button is-danger" ng-click="submitComment(newComment);">Post comment</button>
                                </p>
                            </div>
                        </div>
                    </article>
                </div>



            </div>
        </div>
    </section>
</section>


<br><br>

<h1 ng-if="!allowedAccess">PLEASE LOG IN</h1>