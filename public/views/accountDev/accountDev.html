<section class="project-feed is-alternative section">
    <div class="container">
        <div class="columns">


            <div class="column is-3 account-box-bg-color">
                <div class="box">
                    <figure class="image is-256x256">
                        <img ng-if="!ownPage" ng-src="{{pageOwner.profilepic}}" alt="Profile pic for {{pageOwner.username}}">
                        <img ng-if="ownPage" ng-src="{{curUser.profilepic}}" alt="Profile pic for {{curUser.username}}">
                    </figure>
                    <input ng-if="ownPage" type="text" ng-model="$parent.newProfilePic" placeholder="insert link to profile pic here">

                    <div class="card-content remove-card-content-set-height">
                        <div class="media">
                            <div class="media-content">
                                <p class="title is-4" ng-if="!ownPage && pageOwner.firstname">
                                    {{pageOwner.firstname}} {{pageOwner.lastname}}
                                </p>
                                <p class="title is-4" ng-if="ownPage">
                                    <input type="text" ng-model="$parent.newFirstName" placeholder="First Name">
                                </p>
                                <p class="title is-4" ng-if="ownPage">
                                    <input type="text" ng-model="$parent.newLastName" placeholder="Last Name">
                                </p>
                            </div>
                        </div>
                        <div class="content" ng-if="!ownPage">
                            <p class="add-opacity">{{pageOwner.bio}}</p>
                        </div>
                        <div class="content" ng-if="ownPage">
                            <span class="bold-description">Description: </span>
                            <textarea style="width: 100%" rows="10" cols="60" ng-model="$parent.newBio" placeholder="Describe yourself">
                                                {{curUser.bio}}
                                            </textarea>
                        </div>
                        <div class="verify-and-login" ng-if="!ownPage">
                            <div class="account-float-right">
                                <img class="account-resize-img" src="./img/check.png">
                                <p>Verified</p>
                            </div>
                            <div class="account-float-right add-margin-left">
                                <img class="account-resize-img" src="./img/useravatar.png">
                                <p>Currently Offline</p>
                            </div>
                        </div>     
                    </div>

                    <button type="submit" ng-if="ownPage" ng-click="subChanges($parent.newProfilePic, $parent.newFirstName, $parent.newLastName, $parent.newBio, $parent.newSkills);">Submit Changes</button>
                </div>

                <div class="box account-level">
                    <div class="display-block account-display-block">
                        <p>1</p>
                        <p>Current Project</p>
                    </div>
                    <div class="display-block account-display-block">
                        <p>0</p>
                        <p>Finished Project</p>
                    </div>
                </div>
            </div>

            <div class="column is-9">

                <h3 class="title is-3 style-message-board">Project</h3>
                <article class="box media project-box overflow: auto;" ng-repeat="project in userProjects">
                    <a ng-href="/#!/account/{{project.posterid}}">
                        <div class="media-left">
                            <figure class="image is-64x64">
                                <img ng-if="!ownPage" ng-src="{{pageOwner.profilepic}}" alt="Profile pic for {{pageOwner.username}}">
                                <img ng-if="ownPage" ng-src="{{curUser.profilepic}}" alt="Profile pic for {{curUser.username}}">
                            </figure>
                        </div>
                        <div class="media-content">
                            <div class="content">
                                <p>
                                    <a class="subtitle is-5" ng-href="/#!/account/{{project.posterid}}">{{project.username}}-</a>
                                    <a class="subtitle is-5" ui-sref='projectPublicDetails({id: {{project.projid}}})'>{{project.title}}</a>
                                    <br>
                                    <hr> Project description {{project.description}}
                                </p>
                            </div>
                            <!-- <div class="tags">
                                    <div ng-repeat="skill in project.skills" style="margin:0 1%;">
                                        <p class="tag is-rounded "><a href="" ng-click="filter(skill)">{{skill}}</a></p>
                                    </div>

                                <!-- </div> -->

                        </div>
                    </a>
                </article>

                <h3 class="title is-3 style-message-board">Message Board</h3>
                <div class="box message-board-container">
                    <article class="media " ng-repeat="comment in userComments">
                        <figure class="media-left ">
                            <p class="image is-64x64 ">
                                <img ng-src="{{comment.profilepic}}">
                            </p>
                        </figure>
                        <div class="media-content ">
                            <div class="content ">
                                <p>
                                    <strong ng-if="comment.firstname && comment.lastname">{{comment.firstname}} {{comment.lastname}}</strong>
                                    <strong ng-if="!comment.firstname || !comment.lastname">{{comment.username}}</strong>
                                    <br> {{comment.message}}
                                    <br>
                                </p>
                            </div>

                            <article class="media " ng-repeat="reply in comment.replies">
                                <figure class="media-left ">
                                    <p class="image is-48x48 ">
                                        <img ng-src="{{reply.profilepic}}">
                                    </p>
                                </figure>
                                <div class="media-content ">
                                    <div class="content ">
                                        <p>
                                            <strong ng-if="reply.firstname && reply.lastname">{{reply.firstname}} {{reply.lastname}}</strong>
                                            <strong ng-if="!reply.firstname || !reply.lastname">{{reply.username}}</strong>
                                            <br> {{reply.message}}
                                            <br>
                                        </p>
                                    </div>
                                </div>
                            </article>
                            <article class="media" ng-if="curUser.username">
                                <figure class="media-left">
                                    <p class="image is-64x64">
                                        <img ng-src="{{curUser.profilepic}}">
                                    </p>
                                </figure>
                                <div class="media-content">
                                    <div class="field">
                                        <p class="control">
                                            <textarea class="textarea" ng-model="newReply" placeholder="Add a reply..."></textarea>
                                        </p>
                                    </div>
                                    <div class="field">
                                        <p class="control change-button-style">
                                            <button class="button is-primary" ng-click="submitReply(comment, newReply); newReply=''; ">Post reply</button>
                                        </p>
                                    </div>
                                </div>
                            </article>
                            <hr style="border-top: dotted 1px;" />
                        </div>
                    </article>

                    <article class="media " ng-if="curUser.username">
                        <div class="media-content ">
                            <div class="field ">
                                <p class="control ">
                                    <textarea class="textarea " ng-model="newComment" placeholder="Add a comment... "></textarea>
                                </p>
                            </div>
                            <div class="field ">
                                <p class="control change-button-style">
                                    <button class="button is-primary" ng-click="submitComment(newComment);">Post comment</button>
                                </p>
                            </div>
                        </div>
                    </article>
                </div>

            </div>

        </div>
    </div>
</section>